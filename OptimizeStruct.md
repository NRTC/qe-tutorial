# بهینه کردن ساختار

در ادامه بهینه کردن قالب کلی فایل ورودی و پس از اینکه انرژی کات و کاپوینت را بهینه کردیم، برای اینکه بهترین حالت را  برای جایگزیده شدن اتم ها را در نظر بگیریم، می‌توان از دو دستور زیر استفاده کرد:  
 1-relax  
 2-vcrelax

1.5.1- relax  
 برای بهینه کردن ساختار از دستور ریلکس استفاده می‌کنیم. هنگامی که این دستور را وارد می‌کنیم برنامه مکان اتم ها را جابه جا می‌کند تا مکانی را برای اتم ها در یک سلول واحد انتخاب شود که در آن نقطه کل سیستم کمترین مقدار خود را داشته باشد. دو روش برای بهینه سازی وجود دارد که ما در اینجا به توضیح relax  می پردازیم. در واقع از نمودار سهمی rlax  می‌توان خواص مکانیکی ماده را بدست آورد اما vc-rlax  اینگونه نیست، دارای اجرای بسیار سنگین همراه با ، اطلاعاتatomic position  و پارامتر شبکه \(celldm\)   در خروجی است.  
 1-relax  
 2-vcrelax

شکل 26  تغییر جایگاه اتمی در سلول واحد برای یافتن پایین ترین انرژی

تفاوتی که بین این دستور با scf  دارد این است که باید در فایل ورودی باید مدلی که یون ها از ان پیروی می‌کنند را نیز لحاظ کنیم. همانطور که قبلا اشاره کرده بودیم برنامه کوانتوم اسپرسو بر اساس شبه پتانسیل عمل می‌کند. تئوری شبه پتانسیل در حقیقت کل سیستم را به دو دسته الکترون ها و الکترون های مقید به هسته و خود هسته هستند تقسیم می‌کند. هنگامی که سیستم در حال ریلکس شدن است یون ها می‌توانند در جایگاه نهایی اتم ها نقش موثری داشته باشند. بنابراین دلیل لحاظ کردن مدل حرکت یون ها را لحاظ می‌کنیم که معمولا از یک قالب کلی تبعیت می‌کنند. این دستور را به سیستم با فایل ورودی با نام ریلکس انتقال می دهیم. تصویر زیر یک نمونه از فایل ورودی ریلکس برای سلول واحد دو اتمی گرافن را نمایش می دهد.  همانطور که در تصویر مشاهده می‌شود تمام ورودی ها مانند فایل scf است که پیشتر توضیح داده شد و تنها نوع محسبات را باید در حالت relax قرار داد و همچنین در بلوک چهارم که پس از  الکترون ها که با &IONS مشخص شده است مدل دینامیک یون ها را لحاظ کنیم. ما مدل دینامیکی  ion dynamics= 'bfgs'   را انتخاب نموده ایم. سایر مدل های دینامیکی را می‌توانید از راهنمای نرم افزار پیدا کنید.  
همانطور که گفتیم برای محاسبات ریلکس calculation=relax قرار داده سپس celldm\(1\)  را 1درصد 1 درصد به طور فشاری و کششی تغییر می دهیم تا به نقطه مطلوب که در آن حالت کمترین انرژی را داراست برسیم.

شکل 27 فایل ورودی ریلکس

ترمینال سیستم عامل را در جاییکه فایل ورودی قرار دارد اجرا کرده و دستور زیر را  مانند شکل 28 تایپ می‌کنیم.

شکل 28 دستور ریلکس در ترمینال

خروجی برنامه یک فایل با نام relax.out خواهد بود. انتهای محتوای برنامه خروجی مانند شکل 29 مختصات نهایی سیستم مشخص شده است که وجود final energy الزامی است و پس از ریلکس کردن  celldm \(1\) مختصات اتم ها را در scf با توجه به  ATOMIC POSITION خروجی ریکس تغییر می دهیم.

شکل 29  قسمتی خروجی ریلکس

1.5.2- به دست آورن نمودار تنش و استرس:  
یکی از استفاده هایی که از ریلکس کردن سیستم می‌شود به دست آوردن نمودار تنش و استرس سیستم است. برای این کار عملیات ریلکس کردن را برای عددهایی نزدیک به Celldium1 را انجام می دهیم. معمولا یک درصداcelldium1 را ده بار به آن اضافه و کم می‌کنیم و هر بار سیستم را ریلکس کرده و انرژی را یا داشت می‌کنیم. جدول زیر این عمل را سه بار انجام داده ولی بهتر است برای اینکه بتوانیم کاملا منحنی شکست را داشته باشیم +و – را مانند شکل 30ده بار تکرار کنیم.

شکل 30 تغییرات کششی و فشاری celldm\(1\)

Total energy  
New celldium1

-22.72225547 Ry  
4.491488  
Celldium1+0.03 Celldium1  
-22.622125Ry  
4.537792  
Celldium1+0.02 Celldium1  
-22.722255 Ry  
4.584096  
Celldium1+0.01 Celldium1  
-22.72205647 Ry  
4.6304  
Celldium1  
-22.75525417 Ry  
4.676704  
Celldium1-0.01 Celldium1  
-22.852427 Ry  
4.723008  
Celldium1-0.02 Celldium1  
-22.68888447 Ry  
4.769312  
Celldium1-0.03 Celldium1

جدول 1 جدول محاسبات تنش واسترس  
اکنون می‌توانیم انرژی بدست آمده از خروجی های تغییر celldm\(1\)  را  \( شکل 31Error: Reference source not found\) رسم کنیم به طوریکه محور عمودی انرژی بدست آمده و محور افقی بر حسب درصد تغییر celldm\(1\) می‌باشد.  
 پایین ترین مقدار انرژی به ما بهینه ترین celldium  را می دهد.

شکل 31 نمودار ریلکس کردن گرافن  
همچنین می‌توانید به طور مستقیم جابه جایی اتم ها را به روش زیر مشاهده نمایید، ابتدا xcrysden را باز کنید و روند زیر را طی نمایید:   
فقط توجه کنید که در مرحله اخر انیمیشن را به صورت gif ذخیره نمایید .

الف\) باز کردن فایل ورودی

پ \)انتخاب گزینه display        ب\) انتخاب گزینه اول

ت\) انتخاب GIF و شروع انیمیشن   
شکل  32مراحل ترسیم انیمیشن بهینه شدن ساختار  
1.5.3- Vc-relax  
در این مرحله نیز مانند ریلکس ساختار را بهینه می‌کنیم با این تفاوت که کاری که در حالت قبل به صورت دستی انجام دادیم در این حالت، سیستم به طور اتومات ساختار را بهینه می‌کند و در انتها به ما اطلاعاتatomic position  و پارامتر شبکه \(celldm\) را  در خروجی می دهد.  
در مرحله قبل ریلمس برای گرافن دو کربنه انجام شد در اینجا ورودی vc-relax  برای گرافیت 4 کربنه ویرایش شده است. در فایل خروجی بردار شبکه از پارامتر شبکه سلول های اصلی در ورودی بدست می اید.

شکل 33 ورودی vc-relax

شکل 34  خروجی vc-relax



